<!doctype html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gathr çˆ±æƒ…éœ€æ±‚å¡ï¼ˆv1ï¼‰</title>
  <style>
    :root{
      --bg:#f3f8ff;
      --panel:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --bd:rgba(15,23,42,.10);

      --blue:#1f6fff;          /* ä¸»è“ */
      --blue2:#63a3ff;         /* æµ…è“ */
      --green:#18b37f;         /* ä¸»ç»¿ */
      --green2:#34d399;        /* æµ…ç»¿ */
      --blueSoft:rgba(31,111,255,.10);
      --greenSoft:rgba(24,179,127,.10);

      --shadow: 0 12px 30px rgba(15,23,42,.08);
      --shadow2: 0 6px 16px rgba(15,23,42,.08);

      --radius:18px;
      --radius2:14px;
    }

    * { box-sizing: border-box; }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, "PingFang SC", "Noto Sans SC", sans-serif;
      max-width: 920px;
      margin: 22px auto;
      padding: 0 16px 48px;
      color: var(--text);
      background:
        radial-gradient(1100px 520px at 10% -10%, rgba(99,163,255,.28), transparent 60%),
        radial-gradient(900px 480px at 95% 0%, rgba(31,111,255,.18), transparent 55%),
        radial-gradient(900px 520px at 80% 30%, rgba(52,211,153,.20), transparent 55%),
        radial-gradient(700px 420px at 15% 55%, rgba(24,179,127,.14), transparent 60%),
        var(--bg);
      line-height: 1.55;
    }

    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      margin: 10px 0 14px;
    }
    h1{
      font-size: 22px;
      margin: 0;
      letter-spacing: .2px;
    }
    .tagline{
      color: var(--muted);
      font-size: 14px;
      margin-top: 6px;
    }
    .brandPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.7);
      border: 1px solid var(--bd);
      box-shadow: var(--shadow2);
      font-size: 13px;
      color: var(--muted);
      white-space: nowrap;
    }
    .dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: linear-gradient(180deg, var(--blue2), var(--blue), var(--green));
      box-shadow: 0 0 0 4px rgba(37,99,235,.14);
    }

    .shell{
      background: rgba(255,255,255,.78);
      border: 1px solid var(--bd);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      backdrop-filter: blur(8px);
    }

.shell{
  position: relative;
}
.shell::before{
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 18% 22%, rgba(24,179,127,.10), transparent 40%),
    radial-gradient(circle at 82% 18%, rgba(31,111,255,.10), transparent 42%);
  mask-image: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.12));
}


    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .step{
      font-size: 13px;
      color: var(--muted);
    }
    .progressWrap{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .progressOuter{
      height: 10px;
      background: rgba(15,23,42,.06);
      border-radius: 999px;
      overflow:hidden;
      width: 100%;
      border: 1px solid var(--bd);
    }
    .progressInner{
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--blue2), var(--blue));
      border-radius: 999px;
    }

    .qcard{
      background: var(--panel);
      border: 1px solid var(--bd);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow2);
    }
    .qtitle{
      font-weight: 900;
      margin-bottom: 8px;
      font-size: 16px;
      letter-spacing: .2px;
      display:flex;
      align-items:flex-start;
      gap:10px;
    }
    .qicon{
      width: 34px;
      height: 34px;
      border-radius: 12px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      flex: 0 0 34px;
      background: linear-gradient(135deg, rgba(31,111,255,.12), rgba(24,179,127,.12));
      border: 1px solid rgba(24,179,127,.22);
      box-shadow: 0 10px 20px rgba(15,23,42,.06);
      font-size: 18px;
      line-height: 1;
    }
    .qtext{ padding-top: 2px; }
    .qhint{
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 12px;
    }

    .opts{ display:grid; gap: 10px; }

label.opt.selected{
  border-color: rgba(24,179,127,.55);
  background: linear-gradient(90deg, rgba(31,111,255,.07), rgba(24,179,127,.07));
  box-shadow: 0 12px 24px rgba(24,179,127,.10), 0 12px 24px rgba(31,111,255,.10);
}


    label.opt{
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
      padding: 12px;
      border: 1px solid var(--bd);
      border-radius: var(--radius2);
      background: rgba(255,255,255,.9);
      transition: transform .08s ease, border-color .12s ease, background .12s ease, box-shadow .12s ease;
    }
    label.opt:hover{
      border-color: rgba(24,179,127,.42);
      background: linear-gradient(90deg, rgba(31,111,255,.05), rgba(24,179,127,.05));
      box-shadow: 0 10px 22px rgba(31,111,255,.10), 0 10px 22px rgba(24,179,127,.08);
      transform: translateY(-1px);
    }

label.opt:has(input[type="radio"]:checked){
  border-color: rgba(24,179,127,.55);
  background: linear-gradient(90deg, rgba(31,111,255,.07), rgba(24,179,127,.07));
  box-shadow: 0 12px 24px rgba(24,179,127,.10), 0 12px 24px rgba(31,111,255,.10);
}

    input[type="radio"]{
      margin-top: 3px;
      accent-color: var(--blue);
      transform: scale(1.05);
    }

    select, textarea{
      width: 100%;
      padding: 12px 12px;
      border-radius: var(--radius2);
      border: 1px solid rgba(15,23,42,.18);
      font-size: 14px;
      background: #fff;
      outline: none;
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    select:focus, textarea:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.14);
    }
    textarea{ min-height: 120px; resize: vertical; }

    .nav{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-top: 12px;
    }

    button{
      padding: 11px 14px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.16);
      background: linear-gradient(90deg, rgba(31,111,255,.98), rgba(24,179,127,.96));
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      letter-spacing: .2px;
      box-shadow: 0 12px 22px rgba(31,111,255,.18), 0 12px 22px rgba(24,179,127,.14);
      transition: transform .08s ease, box-shadow .12s ease, filter .12s ease;
    }
    button:hover{
      filter: brightness(1.02);
      box-shadow: 0 16px 28px rgba(31,111,255,.22), 0 16px 28px rgba(24,179,127,.16);
      transform: translateY(-1px);
    }
    button:active{ transform: translateY(0px); }

    button.secondary{
      background: rgba(255,255,255,.88);
      color: var(--text);
      border: 1px solid var(--bd);
      box-shadow: 0 10px 18px rgba(15,23,42,.08);
    }
    button.secondary:hover{
      box-shadow: 0 14px 24px rgba(15,23,42,.10);
      filter:none;
    }

    button.ghost{
      background: linear-gradient(90deg, rgba(31,111,255,.08), rgba(24,179,127,.08));
      color: #0b3aa6;
      border: 1px dashed rgba(24,179,127,.55);
      box-shadow: none;
    }
    button.ghost:hover{
      background: rgba(37,99,235,.10);
      box-shadow: 0 10px 18px rgba(37,99,235,.10);
    }

    button:disabled{
      opacity: .45;
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    .mini{
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px;
    }

    .warn{
      color: #b42318;
      background: rgba(244,63,94,.08);
      border: 1px solid rgba(244,63,94,.18);
      padding: 10px 12px;
      border-radius: var(--radius2);
      font-weight: 800;
      margin-top: 10px;
      display: none;
    }

    .footerActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
      justify-content: flex-end;
    }

    /* Result */
    .captureWrap{ padding: 10px; background: transparent; }

    .result{
      background: var(--panel);
      border: 1px solid rgba(37,99,235,.20);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(37,99,235,.25);
      background: rgba(37,99,235,.06);
      margin-right: 8px;
      font-size: 13px;
      color: #0b3aa6;
      font-weight: 800;
    }
    .badge{
      display:inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(37,99,235,.25);
      background: rgba(37,99,235,.06);
      font-size: 12px;
      color: #0b3aa6;
      margin-left: 8px;
      font-weight: 800;
    }

    .divider{
      border-top: 1px solid rgba(15,23,42,.10);
      margin: 14px 0;
    }

    .bullets{ margin: 8px 0 0 18px; }
    .secTitle{ font-weight: 900; margin: 12px 0 6px; }
    .toggleBtn{ margin-top: 10px; }
    .captureBar{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px dashed rgba(37,99,235,.25);
    }
    .captureHint{ font-size: 12px; color: var(--muted); }
  
    /* ===== Cover ===== */
    #cover{
      margin: 10px 0 18px;
    }
    .coverCard{
      background: rgba(255,255,255,.82);
      border: 1px solid var(--bd);
      border-radius: calc(var(--radius) + 6px);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      padding: 26px 22px;
      backdrop-filter: blur(10px);
    }
    .coverCard::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 520px at 20% 20%, rgba(31,111,255,.22), transparent 60%),
        radial-gradient(820px 520px at 80% 30%, rgba(24,179,127,.22), transparent 58%);
      pointer-events:none;
      z-index:0;
    }
    .coverGrid{
      position:relative;
      z-index:1;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items: center;
    }
    @media (max-width: 720px){
      .coverGrid{ grid-template-columns: 1fr; }
    }
    .coverBrand{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: var(--shadow2);
      width: fit-content;
    }
    .coverBrand .mark{
      width: 12px; height: 12px; border-radius: 999px;
      background: linear-gradient(180deg, var(--blue2), var(--blue), var(--green));
      box-shadow: 0 0 0 4px rgba(31,111,255,.12);
    }
    .coverTitle{
      margin: 14px 0 8px;
      font-size: 28px;
      line-height: 1.2;
      letter-spacing: .2px;
    }
    .coverSub{
      color: var(--muted);
      font-size: 14px;
      margin: 0 0 16px;
    }
    .pillRow{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(37,99,235,.16);
      background: rgba(255,255,255,.70);
      color: #0b3aa6;
      font-size: 13px;
      font-weight: 700;
    }
    .coverArt{
      border-radius: 18px;
      border: 1px solid rgba(15,23,42,.10);
      background:
        radial-gradient(240px 240px at 30% 25%, rgba(31,111,255,.35), transparent 60%),
        radial-gradient(240px 240px at 70% 70%, rgba(24,179,127,.35), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
      box-shadow: var(--shadow2);
      padding: 18px;
      position: relative;
      overflow:hidden;
      min-height: 220px;
    }
    .coverArt .big{
      font-size: 44px;
      line-height: 1;
    }
    .coverArt .small{
      margin-top: 10px;
      color: var(--muted);
      font-size: 13px;
    }
    .startBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 14px 18px;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      font-weight: 900;
      letter-spacing: .2px;
      color: white;
      background: linear-gradient(90deg, var(--blue), var(--green));
      box-shadow: 0 14px 30px rgba(31,111,255,.20);
    }
    .startBtn:hover{ filter: brightness(1.03); transform: translateY(-1px); }
    .startBtn:active{ transform: translateY(0); }
    .startHint{
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

  
    /* ===== Result CTA (æŠ¥åé“¾æ¥) ===== */
    .ctaCard{
      margin-top: 14px;
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(24,179,127,.28);
      border-radius: calc(var(--radius) + 4px);
      box-shadow: var(--shadow2);
      padding: 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      flex-wrap: wrap;
    }
    .ctaTitle{
      font-weight: 900;
      margin: 0 0 4px;
      font-size: 15px;
    }
    .ctaDesc{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
    }
    .ctaBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid rgba(31,111,255,.25);
      background: linear-gradient(90deg, var(--blue), var(--green));
      color: #fff;
      font-weight: 900;
      cursor: pointer;
      text-decoration: none;
      box-shadow: 0 12px 24px rgba(31,111,255,.16), 0 12px 24px rgba(24,179,127,.12);
      transition: transform .08s ease, filter .12s ease;
      white-space: nowrap;
    }
    .ctaBtn:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .ctaBtn:active{ transform: translateY(0px); }

  </style>
</head>

<body>

  <div id="cover">
    <div class="coverCard">
      <div class="coverGrid">
        <div>
          <div class="coverBrand"><span class="mark"></span><strong>Gathr å½©è™¹éœ€æ±‚å¡</strong><span style="color:var(--muted);font-weight:600;">ğŸ’™ğŸ’š</span></div>
          <h2 class="coverTitle">æ‰¾å‡ºä½ ç°åœ¨<br>æœ€éœ€è¦çš„å…³ç³»å½¢å¼</h2>
          <p class="coverSub">ä¸æ˜¯ã€Œä½ æƒ³è¦ä»€ä¹ˆäººã€ï¼Œå…ˆçœ‹ã€Œä½ ç°åœ¨æ›´é€‚åˆä»€ä¹ˆå…³ç³»ã€ã€‚å®Œæˆåä¼šç»™ä½ ï¼šä¸»ç±»å‹ + æ¬¡ç±»å‹ï¼ˆè‹¥æœ‰ï¼‰ä¸ç®€å•è§£è¯»ã€‚</p>

          <button class="startBtn" id="startBtn">âœ¨ å¼€å§‹æµ‹éªŒ</button>
          <div class="startHint">å¤§çº¦ 3â€“5 åˆ†é’Ÿ Â· 21 é¢˜ Â· ä¸€é¢˜ä¸€é¡µ</div>

          <div class="pillRow">
            <div class="pill">ğŸ§­ å…­å¤§å…³ç³»ç±»å‹</div>
            <div class="pill">ğŸ“Š ç¬¦åˆé€šè®¯å½•éœ€æ±‚</div>
            <div class="pill">ğŸ”’ ä¿å¯†æµ‹éªŒ</div>
          </div>
        </div>

        <div class="coverArt" aria-hidden="true">
          <div class="big">ğŸ’™ğŸ’š</div>
          <div class="big" style="margin-top:10px;">âœ¨ğŸ«¶</div>
          <div class="small">æç¤ºï¼šæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œé€‰ã€Œä½ ç°åœ¨çš„çœŸå®çŠ¶æ€ã€ã€‚</div>
        </div>
      </div>
    </div>
  </div>

  <div id="quiz" style="display:none;">

  <header>
    <div>
      <h1>Gathr çˆ±æƒ…éœ€æ±‚å¡v1</h1>
      <div class="tagline">ğŸ’š å®Œæˆåç”Ÿæˆã€Œä¸»ç±»å‹ + æ¬¡ç±»å‹ã€ âœ¨</div>
    </div>
    <div class="brandPill"><span class="dot"></span> Gathr Â· Love Needs ğŸ’™ğŸ’š</div>
  </header>

  <div class="shell">
    <div class="topbar">
      <div class="step" id="stepText">ç¬¬ 1 / 21 é¢˜</div>
      <div class="progressWrap">
        <div class="progressOuter" aria-label="progress">
          <div class="progressInner" id="progressInner"></div>
        </div>
      </div>
    </div>

    <div id="questionArea"></div>

    <div class="nav">
      <button class="secondary" id="btnPrev">ä¸Šä¸€é¢˜</button>
      <button id="btnNext">ä¸‹ä¸€é¢˜</button>
    </div>

    <div class="mini" id="miniHint"></div>
    <div class="warn" id="warn"></div>

    <div id="out"></div>

    <div class="footerActions">
      <button class="secondary" id="btnReset">æ¸…ç©ºé‡æ¥</button>
      <button class="secondary" id="btnJumpToResult" title="ä»…ç”¨äºå†…æµ‹ï¼šè·³åˆ°æœ€åä¸€é¢˜">è·³åˆ°æœ€å</button>
    </div>
  </div>

  </div>

  <!-- html2canvas for saving result as image -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>

// ===== Cover gating =====
const coverEl = document.getElementById('cover');
const quizEl  = document.getElementById('quiz');
const startBtn = document.getElementById('startBtn');
if(startBtn){
  startBtn.addEventListener('click', () => {
    coverEl.style.display = 'none';
    quizEl.style.display = 'block';
    // å›åˆ°é¡¶éƒ¨ï¼ˆç§»åŠ¨ç«¯æ›´é¡ºï¼‰
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
}

/**
 * =========================
 * 1) é¢˜åº“ï¼ˆv1.1ï¼‰
 * =========================
 */
const QUESTIONS = [
  { id:"Q1", type:"scale", title:"Q1 ç›®å‰åœ¨ä½ çš„äººç”Ÿä¸­ï¼Œã€Œæ„Ÿæƒ…ã€çš„é‡è¦ç¨‹åº¦æ˜¯ï¼Ÿ", labels:["1 ä¸é‡è¦","2","3","4","5 éå¸¸é‡è¦"] },
  { id:"Q2", type:"single", title:"Q2 å¦‚æœä¸€æ®µå…³ç³»éœ€è¦ä½ ç¨³å®šæŠ•å…¥æ—¶é—´ä¸å¿ƒåŠ›ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ",
    options:[["A","ç°åœ¨ä¸å¤ªè¡Œ"],["B","å¯ä»¥ï¼Œä½†ä¼šæœ‰å‹åŠ›"],["C","æ²¡é—®é¢˜ï¼Œæˆ‘æœ‰ä½™è£•"]] },
  { id:"Q3", type:"single", title:"Q3 å¦‚æœçŸ­æœŸå†…æ²¡æœ‰å‘å±•å‡ºå…³ç³»ï¼Œä½ ä¼šï¼Ÿ",
    options:[["A","æ¾ä¸€å£æ°”"],["B","æœ‰ç‚¹å¯æƒœï¼Œä½†èƒ½æ¥å—"],["C","ä¼šæ˜æ˜¾å¤±è½"]] },
  { id:"Q4", type:"bool", title:"Q4 ä½ ç°åœ¨æ˜¯ä¸æ˜¯è¿˜æ²¡å‡†å¤‡å¥½è®¤çœŸæŠ•å…¥ä¸€æ®µå…³ç³»ï¼Ÿ" },

  { id:"Q5", type:"single", title:"Q5ï¼ˆåªèƒ½å•é€‰ï¼‰å¦‚æœåªèƒ½é€‰ä¸€ä¸ªï¼Œä½ ç°åœ¨æœ€å¸Œæœ›å…³ç³»å¸¦æ¥çš„æ˜¯ï¼Ÿ",
    options:[["A","ç”Ÿæ´»ä¸­ä¸è¦é‚£ä¹ˆå­¤å•ï¼ˆä¸€èµ·åƒé¥­ã€ç©ã€å‡ºé—¨ï¼‰"],["B","è¢«åœ¨ä¹ã€è¢«å›åº”ã€è¢«æ”¾åœ¨å¿ƒä¸Š"],["C","æœ‰äººå¯ä»¥ä¸€èµ·æŠŠç”Ÿæ´»è¿‡å¥½"],["D","æˆ‘ç°åœ¨è¯´ä¸æ¸…æ¥š"]] },
  { id:"Q6", type:"scale", title:"Q6 ä½ å¯¹ã€Œå‘¨æœ«æ˜¯å¦æœ‰äººä¸€èµ·å®‰æ’æ´»åŠ¨ã€çš„åœ¨æ„ç¨‹åº¦ï¼Ÿ", labels:["1 å®Œå…¨ä¸åœ¨æ„","2","3","4","5 éå¸¸åœ¨æ„"] },
  { id:"Q7", type:"scale", title:"Q7 ä½ å¯¹ã€Œæƒ…ç»ªæ˜¯å¦è¢«ç¨³å®šå›åº”ã€çš„åœ¨æ„ç¨‹åº¦ï¼Ÿ", labels:["1 ä¸éœ€è¦","2","3","4","5 éå¸¸éœ€è¦"] },
  { id:"Q8", type:"scale", title:"Q8 ä½ å¯¹ã€Œä¸€èµ·è§„åˆ’ç”Ÿæ´»ï¼ˆå±…ä½ã€ä½œæ¯ã€æœªæ¥ï¼‰ã€çš„åœ¨æ„ç¨‹åº¦ï¼Ÿ", labels:["1 å®Œå…¨æ²¡æƒ³è¿‡","2","3","4","5 éå¸¸åœ¨æ„"] },
  { id:"Q9", type:"single", title:"Q9ï¼ˆäºŒé€‰ä¸€ï¼‰å¦‚æœåªèƒ½é€‰ä¸€ä¸ªï¼Œä½ æ›´åœ¨æ„ï¼Ÿ",
    options:[["A","å…³ç³»èƒ½ä¸èƒ½è‡ªç„¶èå…¥ç”Ÿæ´»"],["B","æƒ…ç»ªæœ‰æ²¡æœ‰è¢«ç¨³å®šæ¥ä½"]] },
  { id:"Q10", type:"single", title:"Q10 å½“ä½ æƒ…ç»ªä½è½æ—¶ï¼Œä½ æ›´å¸Œæœ›å¯¹æ–¹ï¼Ÿ",
    options:[["A","é™ªæˆ‘åšç‚¹äº‹ã€è½¬ç§»æ³¨æ„åŠ›"],["B","å¬æˆ‘è¯´ã€ç†è§£æˆ‘çš„æ„Ÿå—"],["C","ç”¨å®é™…è¡ŒåŠ¨æ”¯æŒæˆ‘"]] },

  { id:"Q11", type:"single", title:"Q11 å¦‚æœå…³ç³»éœ€è¦ä½ è°ƒæ•´ç”Ÿæ´»ä¹ æƒ¯ï¼ˆä½œæ¯ã€æ—¶é—´ï¼‰ï¼Œä½ ä¼šï¼Ÿ",
    options:[["A","å°½é‡ä¸è°ƒæ•´"],["B","å¯ä»¥å¾®è°ƒ"],["C","æ„¿æ„è®¤çœŸåè°ƒ"]] },
  { id:"Q12", type:"scale", title:"Q12 ä½ æ˜¯å¦æ„¿æ„ä¸ºäº†å…³ç³»ï¼Œå‡å°‘éƒ¨åˆ†ä¸ªäººè‡ªç”±æ—¶é—´ï¼Ÿ", labels:["1 å®Œå…¨ä¸æ„¿æ„","2","3","4","5 éå¸¸æ„¿æ„"] },
  { id:"Q13", type:"single", title:"Q13 å…³äºã€Œä½åœ¨ä¸€èµ·ã€è¿™ä»¶äº‹ï¼Œä½ ç›®å‰çš„æ„Ÿè§‰ï¼Ÿ",
    options:[["A","å®Œå…¨ä¸åœ¨è€ƒè™‘èŒƒå›´"],["B","æœªæ¥å¯èƒ½ï¼Œä½†ä¸æ˜¯ç°åœ¨"],["C","æ˜¯æˆ‘ä¼šè®¤çœŸæ€è€ƒçš„äº‹"]] },
  { id:"Q14", type:"single", title:"Q14 ä½ æ˜¯å¦è®¤åŒï¼šã€åªè¦æœ‰æƒ…æ„Ÿè¿ç»“ï¼Œä¸ä¸€å®šè¦å¸¸è§é¢æˆ–ä¸€èµ·ç”Ÿæ´»ã€‚ã€",
    options:[["H","éå¸¸è®¤åŒ"],["M","æœ‰ç‚¹è®¤åŒ"],["L","ä¸å¤ªè®¤åŒ"]] },
  { id:"Q15", type:"single", title:"Q15 ä½ æ˜¯å¦è®¤åŒï¼šã€å¦‚æœå…³ç³»ç¨³å®šï¼Œæˆ‘ä¼šå¸Œæœ›å®ƒè‡ªç„¶èµ°è¿›æˆ‘çš„æ—¥å¸¸ç”Ÿæ´»ã€‚ã€",
    options:[["H","éå¸¸è®¤åŒ"],["M","æœ‰ç‚¹è®¤åŒ"],["L","ä¸å¤ªè®¤åŒ"]] },
  { id:"Q16", type:"single", title:"Q16 å½“å…³ç³»é‡åˆ°ç°å®å‹åŠ›ï¼ˆæ—¶é—´ã€è·ç¦»ã€å®¶åº­ï¼‰ï¼Œä½ é€šå¸¸ä¼šï¼Ÿ",
    options:[["A","ä¼˜å…ˆä¿æŠ¤è‡ªå·±çš„ç”Ÿæ´»"],["B","å°è¯•åè°ƒçœ‹çœ‹"],["C","ä¼šæŠŠå…³ç³»çº³å…¥é‡è¦è€ƒé‡"]] },

  { id:"Q17", type:"single", title:"Q17 ä½ ç›®å‰çš„çŠ¶æ€æ›´æ¥è¿‘ï¼Ÿ",
    options:[["A","ç¨³å®šä½†å¿™ç¢Œ"],["B","æ­£åœ¨ç»å†è½¬æŠ˜æˆ–è°ƒæ•´æœŸ"],["C","çŠ¶æ€ç¨³å®šï¼Œæƒ³è®¤çœŸæŠ•å…¥å…³ç³»"]] },
  { id:"Q18", type:"bool", title:"Q18 ä½ æ˜¯å¦è®¤åŒï¼šã€æˆ‘ç°åœ¨æ›´æƒ³è®¤è¯†äººï¼Œè€Œä¸æ˜¯ç«‹åˆ»ç¡®å®šå…³ç³»ã€‚ã€" },
  { id:"Q19", type:"scale", title:"Q19 ä½ ç›®å‰å¯¹ã€Œé•¿æœŸå…³ç³»ã€çš„å¿ƒç†å‡†å¤‡åº¦ï¼Ÿ", labels:["1 å‡ ä¹æ²¡æœ‰","2","3","4","5 å¾ˆé«˜"] },
  { id:"Q20", type:"scale", title:"Q20 ä½ å¯¹å…³ç³»ã€Œä¸ç¡®å®šæ€§ã€çš„å®¹å¿åº¦ï¼Ÿ", labels:["1 éå¸¸ä½","2","3","4","5 éå¸¸é«˜"] },
  { id:"Q21", type:"text",  title:"Q21ï¼ˆå¯é€‰ï¼‰ä½ å¸Œæœ›ç°åœ¨çš„å…³ç³»ï¼Œä¸ºä½ çš„äººç”Ÿå¸¦æ¥ä»€ä¹ˆï¼Ÿ", optional:true }
];

/**
 * =========================
 * 2) ç»“æœé¡µæ–‡æ¡ˆï¼ˆé»˜è®¤æŠ˜å ï¼šç²¾ç®€ç‰ˆï¼‰
 * =========================
 */
const COPY = {
  T1: {
    title: "T1ï½œå…³ç³»æš‚ç¼“å‹ï¼šç°åœ¨çš„äººç”Ÿï¼ŒçœŸçš„å·²ç»å¾ˆæ»¡äº†",
    one: "ä½ ä¸æ˜¯ä¸é‡è§†æ„Ÿæƒ…ï¼Œè€Œæ˜¯ä½ ç°åœ¨çš„äººç”Ÿï¼Œæš‚æ—¶è£…ä¸ä¸‹ä¸€æ®µéœ€è¦è¢«è®¤çœŸå¯¹å¾…çš„å…³ç³»ã€‚",
    brief: {
      bullets: [
        "æ­¤åˆ»æ›´é€‚åˆã€Œå…ˆç¨³ä½ç”Ÿæ´»ã€ï¼Œå†ç•™å‡ºä¸€ç‚¹è½»é‡è¿æ¥ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šä½æ¶ˆè€—ã€è¾¹ç•Œæ„Ÿã€æ—¶é—´å¼¹æ€§ã€‚",
        "æœ€é‡è¦çš„æ˜¯ï¼šä¸è¦ä¸ºäº†â€œä¸å­¤å•â€ç¡¬ä¸Šå…³ç³»ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "å…ˆåšã€Œåº•çº¿æ¡ä»¶ã€ï¼šèƒ½é‡ä¸è¢«æ¶ˆè€— + èŠ‚å¥è¢«å°Šé‡ï¼Œå†è¿›å…¥åŒ¹é…ã€‚"
    },
    sections: {
      fit: "ä¸æ˜¯ä¸è°ˆæ‹çˆ±ï¼Œè€Œæ˜¯å…ˆæŠŠäººç”Ÿé…ç½®è°ƒé¡ºï¼šè®©å…³ç³»æˆä¸ºåŠ åˆ†ï¼Œè€Œä¸æ˜¯è´Ÿæ‹…ã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šè½»é‡é™ªä¼´ / ä½å‹åŠ›è¿æ¥ / ä¿æŒè¾¹ç•Œã€‚",
      conditions: [
        "ä½æ¶ˆè€—æ²Ÿé€šï¼šä¸é€¼é—®ã€ä¸å¤ºå‘½è¿ç¯call",
        "æ—¶é—´å¼¹æ€§ï¼šèƒ½æ¥å—ä½ å¿™/é˜¶æ®µæ€§å‹åŠ›",
        "æƒ…ç»ªç¨³å®šï¼šä¸æŠŠæƒ…ç»ªå…¨ä¸¢ç»™ä½ å¤„ç†",
        "è¾¹ç•Œæ„Ÿï¼šå°Šé‡éšç§ä¸èŠ‚å¥",
        "åŒåŸ/è¿‘è·ç¦»ï¼šé™ä½ç»´æŠ¤æˆæœ¬"
      ],
      pacing: [
        "è½»é‡ä½†ç¨³å®šï¼šä¾‹å¦‚æ¯å‘¨ä¸€æ¬¡è§é¢/å›ºå®šä¸€ä¸ªæ—¶æ®µé€šè¯",
        "çº¦ä¼šåâ€œå›è¡€å‹â€ï¼šåƒé¥­æ•£æ­¥ã€çŸ­é€”ã€è½»æ´»åŠ¨"
      ],
      pitfalls: [
        "ä¸€å¼€å§‹å°±è¢«è¦æ±‚æ‰¿è¯º â†’ ä½ ä¼šæœ¬èƒ½é€€ç¼©",
        "å¯¹æ–¹å¼ºæƒ…ç»ªä¾èµ– â†’ å®¹æ˜“å´©ç›˜",
        "ä½ ç”¨â€œå¿™â€å½“ä¸‡èƒ½æŒ¡ç®­ç‰Œ â†’ å®¹æ˜“é”™è¿‡å¥½å¯¹è±¡ï¼ˆå»ºè®®æ˜ç¡®è¾¹ç•Œï¼‰"
      ],
      next: [
        "Gathr åŒ¹é…ï¼šä¼˜å…ˆç­›ã€Œé«˜ç†è§£åº¦ + ä½å ç”¨å‹ã€å¯¹è±¡",
        "åšæ¡ä»¶å¡æ—¶ï¼šæŠŠã€Œä½æ¶ˆè€—ã€æ”¾ç¬¬ä¸€æ¢¯é˜Ÿ"
      ]
    }
  },
  T2: {
    title: "T2ï½œä½å¯†åº¦è¿ç»“å‹ï¼šæƒ³è¦æœ‰äººä¸€èµ·ï¼Œä½†ä¸æƒ³è¢«å…³ç³»å æ»¡",
    one: "ä½ å¸Œæœ›å…³ç³»è‡ªç„¶åœ°å‘ç”Ÿåœ¨ç”Ÿæ´»é‡Œï¼Œè€Œä¸æ˜¯æˆä¸ºå‹åŠ›æ¥æºã€‚",
    brief: {
      bullets: [
        "ä½ æœ€éœ€è¦çš„æ˜¯ï¼šç”Ÿæ´»é™ªä¼´ + ä¸€èµ·å‘ç”Ÿä½“éªŒï¼ˆå‘¨æœ«/æ—…è¡Œ/æ´»åŠ¨ï¼‰ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šèŠ‚å¥åŒé¢‘ã€åŒåŸå¯è§ã€è¾¹ç•Œä¸è‡ªç”±åº¦ä¸€è‡´ã€‚",
        "é›·åŒºï¼šå¯¹æ–¹æŠŠä½ å½“â€œæƒ…ç»ªæ€¥æ•‘åŒ…â€æˆ–ä½ ä¸è¡¨è¾¾éœ€æ±‚ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "æŠŠã€ŒèŠ‚å¥åŒ¹é… + åŒåŸ + å…´è¶£åŒé¢‘ã€è®¾æˆæ ¸å¿ƒæ¡ä»¶ï¼Œå…ˆæŠŠç›¸å¤„è·‘é¡ºå†è°ˆå®šä¹‰ã€‚"
    },
    sections: {
      fit: "æœ€é€‚åˆçš„å…³ç³»å½¢æ€ï¼šç”Ÿæ´»é‡Œæœ‰è¿æ¥ã€æœ‰é™ªä¼´ï¼Œä½†ä¸å¿…é«˜å¼ºåº¦ç»‘å®šã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šä¸€èµ·åƒé¥­/å‡ºé—¨/æ—…è¡Œ/æ´»åŠ¨ï¼Œè®©ç”Ÿæ´»ä¸é‚£ä¹ˆå­¤å•ã€‚",
      conditions: [
        "ä½œæ¯/ç”Ÿæ´»èŠ‚å¥åŒ¹é…ï¼ˆå‘¨æœ«æ˜¯å¦åŒé¢‘ã€ç¤¾äº¤é¢‘ç‡ï¼‰",
        "å…´è¶£ä¸å‡ºè¡Œåå¥½ï¼ˆæ—…è¡Œã€åƒå–ç©ä¹ã€è¿åŠ¨/å±•è§ˆï¼‰",
        "åŒåŸ/é€šå‹¤æˆæœ¬ï¼ˆèƒ½è§æ‰å«å…³ç³»ï¼‰",
        "æƒ…ç»ªä¸è¿‡è½½ï¼ˆèƒ½èŠï¼Œä½†ä¸è¦æ±‚æ—¶æ—¶åˆ»åˆ»æ·±åº¦å…±é¸£ï¼‰",
        "è¾¹ç•Œä¸è‡ªç”±åº¦ä¸€è‡´ï¼ˆé»åº¦ã€è§é¢é¢‘ç‡ã€ç¤¾äº¤ç©ºé—´ï¼‰"
      ],
      pacing: [
        "æ¨èä¸€å‘¨ 1â€“2 æ¬¡é«˜è´¨é‡è§é¢",
        "ç”¨å…±åŒä½“éªŒå‡æ¸©ï¼šåšé¥­/çŸ­é€”/çœ‹å±•/è¿åŠ¨",
        "ä¸å¿…ä¸€ä¸Šæ¥è°ˆâ€œæˆ‘ä»¬æ˜¯ä»€ä¹ˆâ€ï¼Œå…ˆæŠŠèŠ‚å¥è·‘é¡º"
      ],
      pitfalls: [
        "å¯¹æ–¹æŠŠä½ å½“â€œæƒ…ç»ªæ€¥æ•‘åŒ…â€ â†’ ä½ ä¼šé€€",
        "ä½ å¤ªæ€•éº»çƒ¦ä¸è¡¨è¾¾éœ€æ±‚ â†’ å¯¹æ–¹ä¼šè¯¯åˆ¤ä½ å†·",
        "åªè¿½æ±‚å¥½ç©å¿½ç•¥ç¨³å®šä¸å°Šé‡ â†’ å®¹æ˜“é‡åˆ°ä¸é è°±"
      ],
      next: [
        "æ¡ä»¶å¡ï¼šæŠŠã€ŒèŠ‚å¥åŒ¹é…ã€ã€ŒåŒåŸã€ã€Œå…´è¶£åŒé¢‘ã€æ‹‰åˆ°å‰æ’",
        "å‡æ¸©å¡ï¼šä¼˜å…ˆé€‰æ‹©â€œè½»æ¾å…±åŒä½“éªŒâ€çš„ä»»åŠ¡"
      ]
    }
  },
  T3: {
    title: "T3ï½œæƒ…æ„Ÿè¡¥ä½å‹ï¼šæˆ‘æƒ³è¢«åœ¨ä¹ã€è¢«å›åº”",
    one: "ä½ çœŸæ­£é‡è§†çš„ï¼Œæ˜¯æƒ…ç»ªæœ‰æ²¡æœ‰è¢«è®¤çœŸå¯¹å¾…ã€‚",
    brief: {
      bullets: [
        "ä½ éœ€è¦çš„æ˜¯ï¼šç¨³å®šå›åº” + è¢«æ”¾åœ¨å¿ƒä¸Šï¼ˆä¸ä¸€å®šå¤©å¤©è§é¢ï¼‰ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šæ²Ÿé€šä¹ æƒ¯ã€æƒ…ç»ªæˆç†Ÿã€å…³ç³»è§‚ä¸€è‡´ã€‚",
        "é›·åŒºï¼šå¿½å†·å¿½çƒ­ã€æš§æ˜§ä¸æ¸…ã€ç”¨è¯•æ¢ä»£æ›¿è¡¨è¾¾ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "æŠŠã€Œæ²Ÿé€šä¸å›åº”ä¹ æƒ¯ã€è®¾ä¸ºç¡¬é—¨æ§›ï¼Œå°‘ä¸€ç‚¹çŒœï¼Œå¤šä¸€ç‚¹è®²æ¸…æ¥šã€‚"
    },
    sections: {
      fit: "æœ€é€‚åˆçš„å…³ç³»å½¢æ€ï¼šæƒ…æ„Ÿç¨³å®šã€å›åº”åŠæ—¶ã€è®©ä½ æœ‰è¢«çœ‹è§çš„æ„Ÿè§‰ã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šè¢«ç†è§£ã€è¢«å›åº”ã€è¢«æ”¾åœ¨å¿ƒä¸Šã€‚",
      conditions: [
        "æ²Ÿé€šä¸å›åº”ä¹ æƒ¯ï¼ˆæ˜¯å¦ä¸»åŠ¨ã€æ˜¯å¦å†·å¤„ç†ï¼‰",
        "æƒ…ç»ªæˆç†Ÿåº¦ï¼ˆèƒ½å¦å¥½å¥½åµæ¶/ä¿®å¤ï¼‰",
        "åŒç†å¿ƒä¸ç¨³å®šæ€§ï¼ˆè¯´åˆ°åšåˆ°ï¼‰",
        "å…³ç³»è§‚ä¸€è‡´ï¼ˆæ’ä»–/é€æ˜åº¦/è¾¹ç•Œï¼‰",
        "å¯ç”¨æ—¶é—´ï¼ˆè‡³å°‘èƒ½ç¨³å®šæŠ•å…¥ï¼‰"
      ],
      pacing: [
        "ç¨³å®šé¢‘ç‡çš„å°å‰‚é‡ï¼šæ¯å¤©çŸ­è”ç»œ + æ¯å‘¨è§é¢",
        "å¯ä»¥è¾ƒæ—©åšâ€œæƒ…ç»ªç±»å¯¹è¯â€ï¼Œä½†è¦å¾ªåºæ¸è¿›"
      ],
      pitfalls: [
        "å¿½å†·å¿½çƒ­/æš§æ˜§ä¸æ¸… â†’ å¼ºæ¶ˆè€—",
        "è¿‡æ—©æŠŠå®‰å…¨æ„Ÿå¤–åŒ…ç»™å¯¹æ–¹ â†’ å®¹æ˜“ç„¦è™‘",
        "ç”¨æµ‹è¯•/è¯•æ¢ä»£æ›¿è¡¨è¾¾ â†’ å®¹æ˜“è¯¯ä¼¤å…³ç³»"
      ],
      next: [
        "æ¡ä»¶å¡ï¼šæŠŠã€Œæ²Ÿé€šã€ã€Œæƒ…ç»ªæˆç†Ÿã€ã€Œä¸€è‡´æ€§ã€è®¾ä¸ºç¡¬é—¨æ§›",
        "å‡æ¸©å¡ï¼šåâ€œä»·å€¼è§‚/è¾¹ç•Œ/ä¿®å¤æ–¹å¼â€çš„é¢˜ç›®æ›´é€‚åˆä½ "
      ]
    }
  },
  T4: {
    title: "T4ï½œç”Ÿæ´»ä¼™ä¼´å‹ï¼šæˆ‘æƒ³è¦çš„æ˜¯ï¼Œä¸€èµ·æŠŠæ—¥å­è¿‡å¥½",
    one: "ä½ æœŸå¾…å…³ç³»èƒ½çœŸæ­£èµ°è¿›ç”Ÿæ´»ï¼Œè€Œä¸æ˜¯åªåœåœ¨æ„Ÿè§‰ã€‚",
    brief: {
      bullets: [
        "ä½ æ›´åœ¨æ„ï¼šç°å®åä½œã€ç¨³å®šå¯é ã€é•¿æœŸå¯æŒç»­ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šåŸå¸‚/å±…ä½ã€ç”Ÿæ´»æ–¹å¼ã€è´£ä»»æ„Ÿã€å†²çªå¤„ç†ã€‚",
        "é›·åŒºï¼šåªè°ˆæµªæ¼«ä¸è°ˆç°å®ã€ç¡¬ç£¨å·¨å¤§ç”Ÿæ´»å·®å¼‚ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "æŠŠã€ŒåŒåŸ/å¯è¿ç§» + ç”Ÿæ´»ä¹ æƒ¯ + è´£ä»»æ„Ÿã€æ”¾åœ¨ç¬¬ä¸€æ¢¯é˜Ÿï¼Œæ—©ç‚¹èŠç°å®ä½†è¯­æ°”è¦æ¸©å’Œã€‚"
    },
    sections: {
      fit: "æœ€é€‚åˆçš„å…³ç³»å½¢æ€ï¼šèƒ½ä¸€èµ·æŠŠç”Ÿæ´»è¿‡é¡ºã€è¿‡ç¨³ã€è¿‡å¾—èˆ’æœã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šæ—¥å¸¸åä½œ + é•¿æœŸå¯æŒç»­ï¼Œè€Œä¸æ˜¯åªæœ‰æ„Ÿè§‰ã€‚",
      conditions: [
        "åŸå¸‚/å±…ä½è§„åˆ’ï¼ˆæœªæ¥ä½å“ªã€æ˜¯å¦æ„¿æ„é è¿‘ï¼‰",
        "ä½œæ¯ä¸ç”Ÿæ´»æ–¹å¼ï¼ˆå«ç”Ÿä¹ æƒ¯ã€æ¶ˆè´¹è§‚ã€ç¤¾äº¤æ–¹å¼ï¼‰",
        "è´£ä»»æ„Ÿä¸æ‰§è¡ŒåŠ›ï¼ˆé è°±ä¸é è°±ï¼‰",
        "å†²çªå¤„ç†æ–¹å¼ï¼ˆèƒ½ä¸èƒ½æ²Ÿé€šè§£å†³ï¼‰",
        "å®¶åº­ä¸äººç”Ÿå®‰æ’ï¼ˆçˆ¶æ¯/å­©å­/äº‹ä¸šä¼˜å…ˆçº§ï¼‰"
      ],
      pacing: [
        "æŠŠç”Ÿæ´»æ‹¿æ¥ä¸€èµ·è·‘ï¼šä¹°èœåšé¥­ã€ä¸€èµ·å¤„ç†å°äº‹",
        "æ—©æœŸå°±å¯ä»¥èŠç°å®ï¼šä½å“ªã€é’±æ€ä¹ˆèŠ±ã€æœªæ¥æ€ä¹ˆå®‰æ’ï¼ˆè¯­æ°”æ¸©å’Œï¼‰"
      ],
      pitfalls: [
        "åªè°ˆæµªæ¼«ä¸è°ˆç°å® â†’ ä½ ä¼šå¤±æœ›",
        "ä½ è¿‡åº¦â€œé¡¹ç›®ç®¡ç†â€å¯¹æ–¹ â†’ å¯¹æ–¹ä¼šè§‰å¾—è¢«ç®¡",
        "ç”Ÿæ´»è§‚å·®å¼‚å¤ªå¤§è¿˜ç¡¬ç£¨ â†’ å¾ˆç´¯ã€éš¾ä¿®"
      ],
      next: [
        "æ¡ä»¶å¡ï¼šä¼˜å…ˆã€ŒåŒåŸ/å¯è¿ç§»ã€ã€Œç”Ÿæ´»ä¹ æƒ¯ã€ã€Œè´£ä»»æ„Ÿã€",
        "ä»·å€¼/è¡ŒåŠ¨å¡ï¼šä½ ä¼šç”¨å¾—ç‰¹åˆ«å¥½ï¼ˆé•¿æœŸç»è¥å‹ï¼‰"
      ]
    }
  },
  T5: {
    title: "T5ï½œè®¤çœŸæŠ•å…¥å‹ï¼šæˆ‘å·²å‡†å¤‡å¥½ï¼ŒæŠŠå…³ç³»æ”¾è¿›äººç”Ÿè§„åˆ’",
    one: "ä½ æ„¿æ„ä¸ºäº†åˆé€‚çš„å…³ç³»ï¼Œè°ƒæ•´è‡ªå·±çš„äººç”Ÿã€‚",
    brief: {
      bullets: [
        "ä½ é€‚åˆï¼šç›®æ ‡ä¸€è‡´ã€æ‰¿è¯ºèƒ½åŠ›åŒ¹é…ã€èƒ½èµ°å‘é•¿æœŸçš„å…³ç³»ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šå…³ç³»ç›®æ ‡ä¸€è‡´ã€ä»·å€¼è§‚åº•çº¿ã€ç°å®å¯è¡Œæ€§ã€‚",
        "é›·åŒºï¼šæ¨è¿›å¤ªå¿«ã€æ ‡å‡†å¤ªç†æƒ³åŒ–ã€æŠŠè®¤çœŸå˜æˆæ§åˆ¶ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "æŠŠã€Œå…³ç³»ç›®æ ‡ã€è®¾æˆç¡¬é—¨æ§›ï¼Œä¼˜å…ˆåŒ¹é…åŒæ ·è®¤çœŸä¸”å‡†å¤‡åº¦é«˜çš„äººï¼Œå‡å°‘æ— æ•ˆçº¦ä¼šã€‚"
    },
    sections: {
      fit: "æœ€é€‚åˆçš„å…³ç³»å½¢æ€ï¼šæ–¹å‘æ˜ç¡®ã€å½¼æ­¤è®¤çœŸã€èƒ½èµ°å‘é•¿æœŸæ‰¿è¯ºã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šæ·±åº¦äº²å¯† + ç¨³å®šé€‰æ‹© + ä¸€èµ·è§„åˆ’äººç”Ÿã€‚",
      conditions: [
        "å…³ç³»ç›®æ ‡ä¸€è‡´ï¼ˆæ˜¯å¦åŒæ ·æƒ³é•¿æœŸï¼‰",
        "æ‰¿è¯ºèƒ½åŠ›åŒ¹é…ï¼ˆæ—¶é—´ã€ç²¾åŠ›ã€ç°å®æ¡ä»¶ï¼‰",
        "ä»·å€¼è§‚ä¸åº•çº¿ï¼ˆå¿ è¯š/é€æ˜/è¾¹ç•Œï¼‰",
        "å…±åŒæˆé•¿æ„æ„¿ï¼ˆæ„¿ä¸æ„¿æ„ä¸€èµ·å˜å¥½ï¼‰",
        "ç°å®å¯è¡Œæ€§ï¼ˆè·ç¦»ã€å·¥ä½œã€å®¶åº­ï¼‰"
      ],
      pacing: [
        "å¯ä»¥æ›´å¿«è¿›å…¥â€œç¡®è®¤å…³ç³»â€çš„å¯¹è¯ï¼Œä½†é¿å…å‹è¿«æ„Ÿ",
        "é€‚åˆåšâ€œæœªæ¥ç›¸å…³ä»»åŠ¡â€ï¼šå…±åŒè®¡åˆ’ã€å…±åŒå†³ç­–å°é¡¹ç›®"
      ],
      pitfalls: [
        "ä½ å¤ªå¿«æ¨è¿›ï¼Œå¯¹æ–¹è¿˜æ²¡å‡†å¤‡å¥½ â†’ å…³ç³»ä¼šè¢«æ¨å€’",
        "æ ‡å‡†å¤ªç†æƒ³åŒ– â†’ å®¹æ˜“æŒ‘å‰”",
        "æŠŠè®¤çœŸå˜æˆæ§åˆ¶ â†’ å¤±å»æ¾å¼›æ„Ÿ"
      ],
      next: [
        "çº¢å¨˜/AIï¼šä¼˜å…ˆæ¨ç›®æ ‡æ˜ç¡®çš„äººï¼ˆå‡å°‘æ— æ•ˆçº¦ä¼šï¼‰",
        "æ¡ä»¶å¡ï¼šæŠŠâ€œå…³ç³»ç›®æ ‡â€è®¾ä¸ºç¡¬é—¨æ§›"
      ]
    }
  },
  T6: {
    title: "T6ï½œæ¢ç´¢è¿‡æ¸¡å‹ï¼šæˆ‘æ­£åœ¨é‡æ–°è®¤è¯†è‡ªå·±",
    one: "ä½ ç°åœ¨æ›´é‡è¦çš„ï¼Œä¸æ˜¯å®šä¹‰å…³ç³»ï¼Œè€Œæ˜¯ç¡®è®¤è‡ªå·±ã€‚",
    brief: {
      bullets: [
        "ä½ æ›´é€‚åˆï¼šä½å‹åŠ›æ¢ç´¢ + é€æ­¥æ¸…æ™°éœ€æ±‚ï¼ˆä¸æ€¥ç€å®šä¹‰ï¼‰ã€‚",
        "æ¡ä»¶è®¾ç½®é‡ç‚¹ï¼šå®‰å…¨æ„Ÿã€å°Šé‡ã€èŠ‚å¥å¼¹æ€§ã€æ²Ÿé€šé€æ˜ã€‚",
        "é›·åŒºï¼šæŠŠæ¢ç´¢å½“å€Ÿå£é€ƒé¿è¯šå®ã€æ°¸è¿œä¸æ”¶æ•›éœ€æ±‚ã€‚"
      ],
      ctaTitle: "ä¸‹ä¸€æ­¥å»ºè®®",
      ctaText: "å…ˆåšâ€œåº•çº¿å¡â€è€Œä¸æ˜¯â€œç†æƒ³å¡â€ï¼šæŠŠä¸ä¼¤å®³å½¼æ­¤ã€èŠ‚å¥èˆ’æœæ”¾åœ¨ç¬¬ä¸€ä½ã€‚"
    },
    sections: {
      fit: "æœ€é€‚åˆçš„å…³ç³»å½¢æ€ï¼šä½å‹åŠ›æ¢ç´¢ + é€æ­¥æ¸…æ™°è‡ªå·±çš„éœ€æ±‚ã€‚",
      func: "å…³ç³»åŠŸèƒ½é‡ç‚¹ï¼šå¯¹ç…§ã€è¯•é”™ã€ç¡®è®¤è¾¹ç•Œã€é‡æ–°è®¤è¯†è‡ªå·±ã€‚",
      conditions: [
        "å®‰å…¨æ„Ÿä¸å°Šé‡ï¼ˆä¸é€¼ã€ä¸å‚¬ã€ä¸ç¾è¾±ï¼‰",
        "æ²Ÿé€šé€æ˜ï¼ˆèƒ½è¯´æ¸…æ¥šå½¼æ­¤æœŸå¾…ï¼‰",
        "èŠ‚å¥å¼¹æ€§ï¼ˆå…è®¸æ…¢æ…¢æ¥ï¼‰",
        "ä»·å€¼è§‚åº•çº¿ä¸€è‡´ï¼ˆè‡³å°‘ä¸äº’ç›¸ä¼¤å®³ï¼‰",
        "ç”Ÿæ´»å¯äº¤é›†ï¼ˆèƒ½è§é¢ï¼Œèƒ½ç›¸å¤„ï¼‰"
      ],
      pacing: [
        "ä¸€å¼€å§‹å°±è®²æ¸…æ¥šï¼šæˆ‘ç°åœ¨åœ¨æ¢ç´¢æœŸï¼Œä¸ä»£è¡¨ä¸è®¤çœŸ",
        "ç”¨ä½“éªŒå‹äº’åŠ¨å…ˆå»ºç«‹çœŸå®æ„Ÿï¼Œå†å†³å®šè¦ä¸è¦æ›´è¿›ä¸€æ­¥"
      ],
      pitfalls: [
        "æŠŠæ¢ç´¢å½“å€Ÿå£é€ƒé¿è¯šå® â†’ ä¼šä¼¤äººä¹Ÿä¼¤å·±",
        "é‡åˆ°å¼ºæ¨è¿›å‹å¯¹è±¡ â†’ ä½ ä¼šåæ„Ÿ",
        "ä¸€ç›´ä¸æ”¶æ•›éœ€æ±‚ â†’ å®¹æ˜“é™·å…¥æ°¸è¿œåœ¨è¯•çš„å¾ªç¯"
      ],
      next: [
        "æ¡ä»¶å¡ï¼šå…ˆåšâ€œåº•çº¿å¡â€ï¼Œå†åšâ€œç†æƒ³å¡â€",
        "å‡æ¸©å¡ï¼šå…ˆèµ°è½»æ¾äº’ç›¸äº†è§£ï¼Œä¸è¦ä¸€ä¸Šæ¥è°ˆç»ˆå±€"
      ]
    }
  }
};

/**
 * =========================
 * 3) è®¡åˆ†è§„åˆ™ï¼ˆv2.0ï¼‰â€”â€”ä¸å˜
 * =========================
 */
function mapABCTo135(v){ return v==="A"?1 : v==="B"?3 : 5; }
function mapBoolTo15(v){ return v===true?1 : 5; } // Q4: æ˜¯=1, å¦=5
function mapHMLTo531(v){ return v==="H"?5 : v==="M"?3 : 1; }

function calcIndexes(ans){
  for (const q of QUESTIONS){
    if (q.id === "Q21") continue;
    if (ans[q.id] === undefined || ans[q.id] === null || ans[q.id] === "") {
      throw new Error(`å°šæœªå®Œæˆï¼š${q.id}`);
    }
  }

  const q1 = +ans.Q1;
  const q2v = mapABCTo135(ans.Q2);
  const q3v = mapABCTo135(ans.Q3);
  const q4v = mapBoolTo15(ans.Q4);
  const I_Energy = (q1 + q2v + q3v + q4v) / 4;

  const w = (ans.Q5 === "D") ? 0.8 : 1.0;

  const I_Companion_raw =
    (ans.Q5 === "A" ? 5 : 0) +
    (+ans.Q6) +
    (ans.Q9 === "A" ? 5 : 0) +
    (ans.Q10 === "A" ? 5 : 0);

  const I_Emotion_raw =
    (ans.Q5 === "B" ? 5 : 0) +
    (+ans.Q7) +
    (ans.Q9 === "B" ? 5 : 0) +
    (ans.Q10 === "B" ? 5 : 0);

  const I_Life_raw =
    (ans.Q5 === "C" ? 5 : 0) +
    (+ans.Q8) +
    (ans.Q10 === "C" ? 5 : 0) +
    mapHMLTo531(ans.Q15);

  const I_Companion = I_Companion_raw * w;
  const I_Emotion   = I_Emotion_raw   * w;
  const I_Life      = I_Life_raw      * w;

  const q11v = mapABCTo135(ans.Q11);
  const q12 = +ans.Q12;
  const q13v = mapABCTo135(ans.Q13);
  const q16v = mapABCTo135(ans.Q16);
  const q19 = +ans.Q19;
  const I_Commit = (q11v + q12 + q13v + q16v + q19) / 5;

  return { I_Energy, I_Companion, I_Emotion, I_Life, I_Commit, w };
}

function judgeType(ans){
  const ix = calcIndexes(ans);

  const t1Signals = [
    ix.I_Energy <= 2.5,
    ans.Q4 === true,
    ans.Q2 === "A",
    (+ans.Q19) <= 2
  ].filter(Boolean).length;

  if (t1Signals >= 2){
    return {
      main: "T1",
      secondary: null,
      confidence: "é«˜",
      indexes: ix,
      note: `T1 early-exitï¼ˆå‘½ä¸­ ${t1Signals} æ¡ï¼‰`
    };
  }

  const func = [
    ["I_Companion", ix.I_Companion],
    ["I_Emotion", ix.I_Emotion],
    ["I_Life", ix.I_Life],
  ].sort((a,b)=>b[1]-a[1]);

  const mainFunc = func[0][0];
  const mainFuncScore = func[0][1];
  const secondFunc = func[1][0];
  const secondFuncScore = func[1][1];

  const condA = (ans.Q17 === "B") || (ans.Q18 === true);
  const condB = (ix.I_Commit <= 3) && ((+ans.Q19) <= 3);
  const condC = (mainFuncScore - secondFuncScore) <= 3;
  const allowT6 = condA && condB && condC;

  const isT5 =
    ix.I_Commit >= 4 &&
    ((ix.I_Emotion >= 15) || (ix.I_Life >= 15)) &&
    (ans.Q17 === "C");

  let main = null;
  if (isT5){
    main = "T5";
  } else {
    if (mainFunc === "I_Companion" && ix.I_Commit < 3.5) main = "T2";
    else if (mainFunc === "I_Emotion" && ix.I_Commit >= 2.5 && ix.I_Commit < 4) main = "T3";
    else if (mainFunc === "I_Life" && ix.I_Commit >= 3) main = "T4";
    else main = (mainFunc === "I_Companion") ? "T2" : (mainFunc === "I_Emotion") ? "T3" : "T4";
  }

  let secondary = null;
  const lead = mainFuncScore - secondFuncScore;
  const secondClose = lead <= 3;
  if (ix.I_Commit >= 3 && secondClose){
    secondary = (secondFunc === "I_Companion") ? "T2" : (secondFunc === "I_Emotion") ? "T3" : "T4";
    if (secondary === main) secondary = null;
  }

  let confidence = "ä¸­";
  if (lead >= 6) confidence = "é«˜";
  else if (lead <= 2) confidence = "ä½";

  let note = `ä¸»è½´=${mainFunc}(${mainFuncScore.toFixed(1)}), æ¬¡è½´=${secondFunc}(${secondFuncScore.toFixed(1)}), I_Commit=${ix.I_Commit.toFixed(2)}`;

  if (allowT6){
    if (lead <= 2){
      secondary = "T6";
    } else {
      note += "ï½œT6æ¡ä»¶æˆç«‹ï¼ˆçŠ¶æ€æ¢ç´¢ï¼‰ï¼Œæœªè¦†ç›–ä¸»å‹";
      if (ans.Q18 === true) secondary = "T6";
    }
  }

  return { main, secondary, confidence, indexes: ix, note };
}

/**
 * =========================
 * 4) ä¸€é¢˜ä¸€é¡µ UI
 * =========================
 */
const questionArea = document.getElementById("questionArea");
const stepText = document.getElementById("stepText");
const progressInner = document.getElementById("progressInner");
const warnEl = document.getElementById("warn");
const out = document.getElementById("out");
const miniHint = document.getElementById("miniHint");

let currentIndex = 0;
const answers = {};

function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;")
    .replaceAll("\n","<br/>");
}

function totalRequired(){
  return QUESTIONS.filter(q => q.id !== "Q21").length;
}

function countAnsweredRequired(){
  let n = 0;
  for (const q of QUESTIONS){
    if (q.id === "Q21") continue;
    if (answers[q.id] !== undefined && answers[q.id] !== null && answers[q.id] !== "") n++;
  }
  return n;
}

function renderProgress(){
  const total = QUESTIONS.length;
  const step = currentIndex + 1;
  stepText.textContent = `ç¬¬ ${step} / ${total} é¢˜`;

  const done = countAnsweredRequired();
  const req = totalRequired();
  const pct = Math.round((done / req) * 100);
  progressInner.style.width = `${Math.min(100, Math.max(0, pct))}%`;

  miniHint.textContent = `å·²å®Œæˆå¿…å¡«ï¼š${done}/${req}ï¼ˆ${pct}%ï¼‰`;
}

function showWarn(msg){
  if (!msg){
    warnEl.style.display = "none";
    warnEl.textContent = "";
    return;
  }
  warnEl.style.display = "block";
  warnEl.textContent = msg;
}

function renderQuestion(){
  showWarn("");
  out.innerHTML = "";

  const q = QUESTIONS[currentIndex];
  document.getElementById("btnPrev").disabled = currentIndex === 0;

  const isLast = currentIndex === QUESTIONS.length - 1;
  document.getElementById("btnNext").textContent = isLast ? "æäº¤å¹¶æŸ¥çœ‹ç»“æœ" : "ä¸‹ä¸€é¢˜";

  renderProgress();

  const card = document.createElement("div");
  card.className = "qcard";

  const title = document.createElement("div");
  title.className = "qtitle";
  // å°å›¾æ ‡ï¼šåªæ”¹UIï¼Œä¸æ”¹é¢˜ç›®å†…å®¹
const iconMap = { scale:"ğŸ“Š", single:"ğŸ§©", bool:"âœ…", text:"ğŸ’¬" };
const iconSpan = document.createElement("span");
iconSpan.className = "qicon";
iconSpan.textContent = iconMap[q.type] || "ğŸ’ ";
const textSpan = document.createElement("span");
textSpan.className = "qtext";
textSpan.textContent = q.title;
title.appendChild(iconSpan);
title.appendChild(textSpan);
  card.appendChild(title);

  const hint = document.createElement("div");
  hint.className = "qhint";
  hint.textContent = (q.id === "Q21") ? "å¯ä¸å¡«ï¼Œä¸€å¥è¯å°±å¥½ã€‚" : "è¯·é€‰æ‹©æœ€ç¬¦åˆä½ å½“ä¸‹çŠ¶æ€çš„é€‰é¡¹ã€‚";
  card.appendChild(hint);

  const opts = document.createElement("div");
  opts.className = "opts";

  function markSelected(name){
    opts.querySelectorAll(`input[name="${name}"]`).forEach(inp=>{
      const lab = inp.closest("label.opt");
      if (!lab) return;
      if (inp.checked) lab.classList.add("selected");
      else lab.classList.remove("selected");
    });
  }

  if (q.type === "scale"){
    // ç›´æ¥å±•ç¤º 1â€“5 åˆ†ï¼ˆä¸å†ç”¨ä¸‹æ‹‰é€‰æ‹©ï¼‰
    for (let i=1;i<=5;i++){
      const lab = document.createElement("label");
      lab.className = "opt";

      const r = document.createElement("input");
      r.type = "radio";
      r.name = q.id;
      r.value = String(i);

      if (Number(answers[q.id]) === i) r.checked = true;

      r.addEventListener("change", ()=>{
        answers[q.id] = i;
        renderProgress();
        markSelected(q.id);
      });

      const sp = document.createElement("span");
      sp.textContent = q.labels ? q.labels[i-1] : String(i);

      lab.appendChild(r);
      lab.appendChild(sp);
      opts.appendChild(lab);
    }
  }

  if (q.type === "single"){
    q.options.forEach(([val, labelText])=>{
      const lab = document.createElement("label");
      lab.className = "opt";

      const r = document.createElement("input");
      r.type = "radio";
      r.name = q.id;
      r.value = val;

      if (answers[q.id] === val) r.checked = true;

      r.addEventListener("change", ()=>{
        answers[q.id] = val;
        renderProgress();
        markSelected(q.id);
      });

      const sp = document.createElement("span");
      sp.textContent = `${val}. ${labelText}`;

      lab.appendChild(r);
      lab.appendChild(sp);
      opts.appendChild(lab);
    });
  }

  if (q.type === "bool"){
    [["yes","æ˜¯"],["no","å¦"]].forEach(([val, text])=>{
      const lab = document.createElement("label");
      lab.className = "opt";

      const r = document.createElement("input");
      r.type = "radio";
      r.name = q.id;
      r.value = val;

      const stored = answers[q.id];
      if (stored === true && val === "yes") r.checked = true;
      if (stored === false && val === "no") r.checked = true;

      r.addEventListener("change", ()=>{
        answers[q.id] = (val === "yes");
        renderProgress();
        markSelected(q.id);
      });

      const sp = document.createElement("span");
      sp.textContent = text;

      lab.appendChild(r);
      lab.appendChild(sp);
      opts.appendChild(lab);
    });
  }

  if (q.type === "text"){
    const ta = document.createElement("textarea");
    ta.name = q.id;
    ta.placeholder = "å¯ä¸å¡«ã€‚ä¸€å¥è¯å°±å¥½ã€‚";
    if (answers[q.id] !== undefined) ta.value = answers[q.id];

    ta.addEventListener("input", ()=>{
      answers[q.id] = ta.value || "";
    });

    opts.appendChild(ta);
  }

  card.appendChild(opts);
  questionArea.innerHTML = "";
  questionArea.appendChild(card);
  // åˆå§‹é«˜äº®
  markSelected(q.id);
}

function validateCurrent(){
  const q = QUESTIONS[currentIndex];
  if (q.id === "Q21") return true;
  const v = answers[q.id];
  return !(v === undefined || v === null || v === "");
}

function goNext(){
  showWarn("");

  if (!validateCurrent()){
    showWarn("âš ï¸ è¿™ä¸€é¢˜è¿˜æ²¡é€‰å®Œå“¦ã€‚");
    return;
  }

  const isLast = currentIndex === QUESTIONS.length - 1;
  if (!isLast){
    currentIndex++;
    renderQuestion();
    return;
  }

  try{
    const res = judgeType(answers);
    renderResult(res, answers);
  }catch(e){
    showWarn(`âš ï¸ ${e.message || String(e)}`);
  }
}

function goPrev(){
  showWarn("");
  if (currentIndex > 0){
    currentIndex--;
    renderQuestion();
  }
}

/**
 * =========================
 * 5) ç»“æœé¡µæ¸²æŸ“ï¼ˆé»˜è®¤æŠ˜å ï¼šç²¾ç®€ç‰ˆï¼‰
 * =========================
 */
function renderTypeBlock(typeCode, isMain, collapsedDefault=true){
  const c = COPY[typeCode];
  const badge = isMain ? "ä¸»ç±»å‹" : "æ¬¡ç±»å‹";
  const blockId = `${typeCode}_${isMain ? "main" : "sec"}`;

  const briefBullets = c.brief.bullets.map(x => `<li>${escapeHtml(x)}</li>`).join("");
  const full = `
    <div class="secWrap">
      <div class="secTitle">ä½ ç°åœ¨æœ€é€‚åˆçš„å…³ç³»å½¢æ€</div>
      <div>${escapeHtml(c.sections.fit)}</div>

      <div class="secTitle">ä½ è¦çš„â€œå…³ç³»åŠŸèƒ½â€</div>
      <div>${escapeHtml(c.sections.func)}</div>

      <div class="secTitle">æ¡ä»¶è®¾ç½®å»ºè®®ï¼ˆä¼˜å…ˆçº§ï¼‰</div>
      <ul class="bullets">${c.sections.conditions.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>

      <div class="secTitle">äº’åŠ¨èŠ‚å¥å»ºè®®</div>
      <ul class="bullets">${c.sections.pacing.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>

      <div class="secTitle">å…³ç³»é›·åŒºï¼ˆå®¹æ˜“è¸©ï¼‰</div>
      <ul class="bullets">${c.sections.pitfalls.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>

      <div class="secTitle">Gathr ä¸‹ä¸€æ­¥</div>
      <ul class="bullets">${c.sections.next.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
    </div>
  `;

  return `
    <div class="divider"></div>
    <div>
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
        <div>
          <div style="font-weight:900; font-size:16px;">${escapeHtml(c.title)} <span class="badge">${badge}</span></div>
          <div style="margin-top:8px;"><b>${escapeHtml(c.one)}</b></div>
        </div>
      </div>

      <div style="margin-top:12px;">
        <div style="font-weight:900;">ç²¾ç®€ç‰ˆï¼šä½ å¯ä»¥å…ˆè®°ä½è¿™ 3 ç‚¹</div>
        <ul class="bullets">${briefBullets}</ul>

        <div style="margin-top:10px; padding:12px; border:1px solid rgba(37,99,235,.18); background: rgba(37,99,235,.06); border-radius: var(--radius2);">
          <div style="font-weight:900; color:#0b3aa6;">${escapeHtml(c.brief.ctaTitle)}</div>
          <div style="margin-top:4px;">${escapeHtml(c.brief.ctaText)}</div>
        </div>

        <button class="ghost toggleBtn" data-toggle="${blockId}">${collapsedDefault ? "å±•å¼€æ›´å¤šå»ºè®®" : "æ”¶èµ·"}</button>

        <div id="${blockId}" style="display:${collapsedDefault ? "none" : "block"};">
          ${full}
        </div>
      </div>
    </div>

    <div class="ctaCard">
      <div>
        <div class="ctaTitle">ğŸš€ ç»§ç»­ Gathr çš„çº¦ä¼šæ—…ç¨‹</div>
        <p class="ctaDesc">æƒ³è®©çº¢å¨˜å¸®ä½ æŠŠç»“æœå˜æˆã€Œå¯è¡ŒåŠ¨çš„é…å¯¹ã€ï¼Ÿç‚¹è¿™é‡Œå»æŠ¥åï¼ˆçº¦ 1 åˆ†é’Ÿï¼‰ã€‚</p>
      </div>
      <a class="ctaBtn" href="https://jinshuju.com/f/u59pbY" target="_blank" rel="noopener noreferrer">å»æŠ¥å â†’</a>
    </div>

  `;
}

function wireToggles(){
  document.querySelectorAll("button[data-toggle]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const id = btn.getAttribute("data-toggle");
      const el = document.getElementById(id);
      if (!el) return;
      const isHidden = el.style.display === "none";
      el.style.display = isHidden ? "block" : "none";
      btn.textContent = isHidden ? "æ”¶èµ·" : "å±•å¼€æ›´å¤šå»ºè®®";
      if (isHidden) setTimeout(()=>el.scrollIntoView({ behavior:"smooth", block:"start" }), 80);
    });
  });
}

/**
 * ä¿å­˜ç»“æœä¸ºå›¾ç‰‡ï¼ˆPNGï¼‰
 * - æˆªå›¾åŒºåŸŸï¼š#resultCaptureï¼ˆä¸åŒ…å«æ•´ä¸ªé¡µé¢ï¼‰
 */
async function saveResultAsImage(){
  const panel = document.getElementById("resultCapture");
  if (!panel){
    alert("æ²¡æœ‰æ‰¾åˆ°ç»“æœåŒºåŸŸï¼Œè¯·å…ˆå®Œæˆæµ‹è¯•ã€‚");
    return;
  }
  if (typeof html2canvas !== "function"){
    alert("æˆªå›¾ç»„ä»¶æœªåŠ è½½æˆåŠŸï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•ã€‚");
    return;
  }

  const prevScrollY = window.scrollY;

  const canvas = await html2canvas(panel, {
    backgroundColor: null,
    scale: Math.min(2, window.devicePixelRatio || 2),
    useCORS: true
  });

  window.scrollTo({ top: prevScrollY });

  const dataUrl = canvas.toDataURL("image/png");
  const a = document.createElement("a");
  const ts = new Date();
  const yyyy = ts.getFullYear();
  const mm = String(ts.getMonth()+1).padStart(2,"0");
  const dd = String(ts.getDate()).padStart(2,"0");
  a.download = `Gathr_çˆ±æƒ…éœ€æ±‚å¡_ç»“æœ_${yyyy}${mm}${dd}.png`;
  a.href = dataUrl;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}

function renderResult(res, ans){
  const header = `
    <div id="resultCapture" class="captureWrap">
      <div class="result">
        <div style="margin-bottom:10px;">
          <span class="pill">ä¸»ç±»å‹ï¼š${res.main}</span>
          ${res.secondary ? `<span class="pill">æ¬¡ç±»å‹ï¼š${res.secondary}</span>` : `<span class="pill">æ¬¡ç±»å‹ï¼šæ— </span>`}
          <span class="pill">ç½®ä¿¡åº¦ï¼š${res.confidence}</span>
        </div>

        <div style="font-weight:900; font-size:16px; margin-bottom:6px;">ä½ çš„ç»“æœå·²ç”Ÿæˆï¼ˆé»˜è®¤å±•ç¤ºç²¾ç®€ç‰ˆå»ºè®®ï¼‰</div>
        <div class="mini">æç¤ºï¼šç‚¹â€œå±•å¼€æ›´å¤šå»ºè®®â€ï¼Œå¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„æ¡ä»¶è®¾ç½®ã€äº’åŠ¨èŠ‚å¥ä¸é›·åŒºã€‚</div>

        ${renderTypeBlock(res.main, true, true)}
        ${res.secondary ? renderTypeBlock(res.secondary, false, true) : ""}

        ${ans.Q21 ? `<div class="divider"></div><div><b>ä½ çš„å¼€æ”¾å›ç­”ï¼š</b><br/>${escapeHtml(ans.Q21)}</div>` : ""}

        <div class="captureBar">
          <div class="captureHint">æƒ³ä¿å­˜ç»“æœï¼Ÿç‚¹å‡»å³ä¾§æŒ‰é’®å³å¯ç”Ÿæˆ PNG å›¾ç‰‡ã€‚</div>
          <button class="secondary" id="btnSaveImage">ä¿å­˜ç»“æœä¸ºå›¾ç‰‡ï¼ˆPNGï¼‰</button>
        </div>
      </div>
    </div>
  `;

  out.innerHTML = header;
  wireToggles();

  const btn = document.getElementById("btnSaveImage");
  if (btn) btn.addEventListener("click", saveResultAsImage);

  setTimeout(()=>window.scrollTo({ top: document.body.scrollHeight, behavior:"smooth" }), 50);
}

function resetAll(){
  for (const k of Object.keys(answers)) delete answers[k];
  currentIndex = 0;
  renderQuestion();
  out.innerHTML = "";
  showWarn("");
}

document.getElementById("btnNext").addEventListener("click", goNext);
document.getElementById("btnPrev").addEventListener("click", goPrev);
document.getElementById("btnReset").addEventListener("click", resetAll);
document.getElementById("btnJumpToResult").addEventListener("click", ()=>{
  currentIndex = QUESTIONS.length - 1;
  renderQuestion();
});

renderQuestion();
</script>
</body>
</html>
